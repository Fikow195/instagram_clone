{% extends "base.html" %}

{% block content %}
<h2>Чат {{ chat.id }}</h2>

<div class="border p-3 mb-3" style="max-width:600px;">
  {% for message in messages %}
    <p>
      <strong>{{ message.sender.username }}:</strong> {{ message.content }}
      {% if message.image_url %}
        <br><img src="{{ message.image_url }}" width="200">
      {% endif %}
    </p>
  {% empty %}
    <p>Пока сообщений нет</p>
  {% endfor %}
</div>

<form method="post" enctype="multipart/form-data" action="{% url 'send_message' chat.id %}">
  {% csrf_token %}
  <input type="text" name="content" class="form-control mb-2" placeholder="Введите сообщение">
  <input type="file" name="image" class="form-control mb-2">
  <button type="submit" class="btn btn-primary">Отправить</button>
</form>
{% endblock %}
